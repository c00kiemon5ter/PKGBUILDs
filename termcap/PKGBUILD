# Maintainer: Ivan c00kiemon5ter Kanakarakis <ivan.kanak@gmail.com>
pkgname="termcap"
pkgver="1.3.1"
pkgrel=2
pkgdesc="enables programs to use display computer terminals in a device-independent manner"
arch=('i686' 'x86_64')
url="http://www.catb.org/~esr/terminfo/"
license=("GPL")
depends=()
makedepends=()
optdepends=()
provides=()
conflicts=("termcap")
source=("ftp://prep.ai.mit.edu/pub/gnu/termcap/${pkgname}-${pkgver}.tar.gz")
sha256sums=('91a0e22e5387ca4467b5bcb18edf1c51b930262fd466d5fda396dd9d26719100')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}/
    gcc -fPIC -c ${pkgname}.c -o ${pkgname}.o -DHAVE_STRING_H=1 -DHAVE_UNISTD_H=1 -DSTDC_HEADERS=1 || return 1
    gcc -shared -Wl,-soname,lib${pkgname}.so.1 -o lib${pkgname}.so.${pkgver} ${pkgname}.o || return 1
}

package() {
    install -D -m755 ${srcdir}/${pkgname}-${pkgver}/lib${pkgname}.so.${pkgver} ${pkgdir}/usr/lib/lib${pkgname}.so.${pkgver}
    #FIXME: clips needs the .so and wont accept .so.1 or else - what can I do for that ?
    install -D -m755 ${srcdir}/${pkgname}-${pkgver}/lib${pkgname}.so.${pkgver} ${pkgdir}/usr/lib/lib${pkgname}.so
}

